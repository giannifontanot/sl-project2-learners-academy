






<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
    <title>Starter Template - Materialize</title>

    <!-- CSS  -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <link href="css/palette.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <link href="css/extras.css" type="text/css" rel="stylesheet" media="screen,projection"/>
</head>


<body>
<nav class="default-primary-color" role="navigation">
    <div class="nav-wrapper container">
        <a id="logo-container" href="#" class="brand-logo">
            <i class="large material-icons">donut_small</i>Computer College
        </a>
        <ul class="right hide-on-med-and-down">
            <li><a href="./main-controller">Dashboard</a></li>
            <li><a href="./">Logout</a></li>
        </ul>

        <ul id="nav-mobile" class="sidenav">
            <li><a href="./main-controller">Dashboard</a></li>
        </ul>
        <a href="#" data-target="nav-mobile" class="sidenav-trigger"><i class="material-icons">menu</i></a>
    </div>
</nav>


<div class="container">
    <h3>Students</h3>
    <table class="striped card-panel highlight">
        <thead>
        <tr>
            <th>Edit</th>
            <th>Student Name</th>
            <th>Delete</th>
        </tr>
        </thead>

        <tbody>
        
<tr><td>
<a class="modal-trigger" href='javascript:fOpenEdit("204875")'><i class="material-icons">edit</i></a>
</td><td>
Reuben D. Lay
</td><td>
<a href='javascript:fOpenDelete("204875")'><i class="material-icons">delete</i></a>
</td></tr>

<tr><td>
<a class="modal-trigger" href='javascript:fOpenEdit("204881")'><i class="material-icons">edit</i></a>
</td><td>
Allen J. Frye
</td><td>
<a href='javascript:fOpenDelete("204881")'><i class="material-icons">delete</i></a>
</td></tr>

<tr><td>
<a class="modal-trigger" href='javascript:fOpenEdit("204896")'><i class="material-icons">edit</i></a>
</td><td>
John L. Bullock
</td><td>
<a href='javascript:fOpenDelete("204896")'><i class="material-icons">delete</i></a>
</td></tr>

<tr><td>
<a class="modal-trigger" href='javascript:fOpenEdit("204912")'><i class="material-icons">edit</i></a>
</td><td>
Kari J. Nixon
</td><td>
<a href='javascript:fOpenDelete("204912")'><i class="material-icons">delete</i></a>
</td></tr>

<tr><td>
<a class="modal-trigger" href='javascript:fOpenEdit("204982")'><i class="material-icons">edit</i></a>
</td><td>
Aileen G. Murry
</td><td>
<a href='javascript:fOpenDelete("204982")'><i class="material-icons">delete</i></a>
</td></tr>

<tr><td>
<a class="modal-trigger" href='javascript:fOpenEdit("205282")'><i class="material-icons">edit</i></a>
</td><td>
Robert L. Thomas
</td><td>
<a href='javascript:fOpenDelete("205282")'><i class="material-icons">delete</i></a>
</td></tr>

<tr><td>
<a class="modal-trigger" href='javascript:fOpenEdit("205981")'><i class="material-icons">edit</i></a>
</td><td>
Christian C. Murphy
</td><td>
<a href='javascript:fOpenDelete("205981")'><i class="material-icons">delete</i></a>
</td></tr>

<tr><td>
<a class="modal-trigger" href='javascript:fOpenEdit("205990")'><i class="material-icons">edit</i></a>
</td><td>
Pamela L. Robinson
</td><td>
<a href='javascript:fOpenDelete("205990")'><i class="material-icons">delete</i></a>
</td></tr>

<tr><td>
<a class="modal-trigger" href='javascript:fOpenEdit("204173")'><i class="material-icons">edit</i></a>
</td><td>
Christopher R. Stevens
</td><td>
<a href='javascript:fOpenDelete("204173")'><i class="material-icons">delete</i></a>
</td></tr>

<tr><td>
<a class="modal-trigger" href='javascript:fOpenEdit("204292")'><i class="material-icons">edit</i></a>
</td><td>
Judy S. Mastro
</td><td>
<a href='javascript:fOpenDelete("204292")'><i class="material-icons">delete</i></a>
</td></tr>

<tr><td>
<a class="modal-trigger" href='javascript:fOpenEdit("204529")'><i class="material-icons">edit</i></a>
</td><td>
John O. Dyer
</td><td>
<a href='javascript:fOpenDelete("204529")'><i class="material-icons">delete</i></a>
</td></tr>

<tr><td>
<a class="modal-trigger" href='javascript:fOpenEdit("204724")'><i class="material-icons">edit</i></a>
</td><td>
Steven C. Juan
</td><td>
<a href='javascript:fOpenDelete("204724")'><i class="material-icons">delete</i></a>
</td></tr>

<tr><td>
<a class="modal-trigger" href='javascript:fOpenEdit("204812")'><i class="material-icons">edit</i></a>
</td><td>
Erica D. Lipford
</td><td>
<a href='javascript:fOpenDelete("204812")'><i class="material-icons">delete</i></a>
</td></tr>

<tr><td>
<a class="modal-trigger" href='javascript:fOpenEdit("204873")'><i class="material-icons">edit</i></a>
</td><td>
Steven J. Shellenberger
</td><td>
<a href='javascript:fOpenDelete("204873")'><i class="material-icons">delete</i></a>
</td></tr>

<tr><td>
<a class="modal-trigger" href='javascript:fOpenEdit("205328")'><i class="material-icons">edit</i></a>
</td><td>
Jonathan C. Lawson
</td><td>
<a href='javascript:fOpenDelete("205328")'><i class="material-icons">delete</i></a>
</td></tr>

<tr><td>
<a class="modal-trigger" href='javascript:fOpenEdit("205876")'><i class="material-icons">edit</i></a>
</td><td>
Doris D. Griego
</td><td>
<a href='javascript:fOpenDelete("205876")'><i class="material-icons">delete</i></a>
</td></tr>

        </tbody>
    </table>
</div>
<a href="https://www.flaticon.com/free-icons/edit" title="edit icons">Edit icons created by Freepik - Flaticon</a>


<script>

</script>
<a id='modalLink' class="waves-effect waves-light btn modal-trigger" href="#modal1">Modal</a>
<!-- Modal Structure -->
<div id="modal1" class="modal">















    <div class="modal-content">
        <h4>Student Detail</h4>
        <div id="contenido">
            <form name="form1">
                <span>Student ID: <input type="text" id="studentId" name="studentId" value=""></span><br/>
                Class ID: <input type="text" id="classId" name="classId" value=""><br/>
                Name: <input type="text" id="studentName" name="studentName" value=""><br/>
                <input type="hidden" id="action" name="action" value="">
<button class="modal-close"  onclick="fSubmitForm()">Enviar</button>
            </form>
        </div>
    </div>
    <div class="modal-footer">
        <a href="javascript:fSubmitForm();" class="modal-close waves-effect waves-green btn-flat">Agree</a>
    </div>
</div>

<script>
    function fSubmitForm(e){
        console.log("--- > fSubmitForm");
        //e.preventDefault();
        const data = new FormData(e.target);
        //console.log(data);
    }
</script>



<!--  Scripts-->
<script>
    //Configuration of Modals
    document.addEventListener('DOMContentLoaded', function () {
        var elems = document.querySelectorAll('.modal');
        var options = {opacity: 0.5}//, onOpenStart: fOpenEdit};
        var instances = M.Modal.init(elems, options);
        var instance = M.Modal.getInstance(elems);
        //instance.open();
        //


    });


    async function fOpenEdit(id) {
        console.log(" -------> fOpenEdit: " + id);
        // Trigger the Modal to open
        document.getElementById('modalLink').click();
        //Fill the data
        await fetchOneStudent(id);


    }

     function fetchOneStudent(id) {

        //First we build the JSON from the form
         const data = new FormData();


        fetch("http://localhost:8080/sl_project2_learners_academy/student-controller", {
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            method: "POST",
            body: JSON.stringify({studentId: id})
        })
            .then(res => res.text()).then((jsonString) => {
            console.log(" -------> fetch: " + jsonString);
            try {

                const jsonObject = JSON.parse(jsonString);
                document.querySelector("#studentId").value = jsonObject.studentId;
                document.querySelector("#classId").value = jsonObject.classId;
                document.querySelector("#studentName").value = jsonObject.studentName;

            } catch (e) {
                // On Error
                console.log("fetchStudents/querySelector" + e);
            }

        });
    }
</script>

<script>
    // NOTE: RUN WITH HTTP://, NOT FILE://
    window.addEventListener("load", () => {

    });
</script>


<button onclick="javascript:\" fSpinner();\"">fSpinner();</button>

<script>
    function fSpinner() {

        $('.preloader-background').delay(1700).fadeOut('slow');
        //
        $('.preloader-wrapper').delay(1700).fadeOut();

    }
</script>
</body>
</html>

<script src="js/materialize.js"></script>
<script type="text/javascript">
    function createRequestObject()
    {
        var returnObj = false;

        if(window.XMLHttpRequest) {
            returnObj = new XMLHttpRequest();
        } else if(window.ActiveXObject) {
            try {
                returnObj = new ActiveXObject("Msxml2.XMLHTTP");

            } catch (e) {
                try {
                    returnObj = new ActiveXObject("Microsoft.XMLHTTP");
                }
                catch (e) {}
            }

        }
        return returnObj;
    }

    var http = createRequestObject();
    var target;

    // This is the function to call, give it the script file you want to run and
    // the div you want it to output to.
    function sendRequest(scriptFile, targetElement)
    {
        target = targetElement;
        try{
            http.open('get', scriptFile, true);
        }
        catch (e){
            document.getElementById(target).innerHTML = e;
            return;
        }
        http.onreadystatechange = handleResponse;
        http.send();
    }

    function handleResponse()
    {
        if(http.readyState == 4) {
            try{
                var strResponse = http.responseText;
                document.getElementById(target).innerHTML = strResponse;
            } catch (e){
                document.getElementById(target).innerHTML = e;
            }
        }
    }
</script>
